@page "/"
@using ProyectoRestaurante.Services.DTOs
@using ProyectoRestaurante.Services.Catalogo
@using ProyectoRestaurante.Services.Carrito
@inject ICatalogoService CatalogoService
@inject ICarritoService CarritoService

@if (productos is null)
{
    <p>Cargando…</p>
}
else
{
    foreach (var p in productos)
    {
        <div>
            <b>@p.Nombre</b> — @p.Precio.ToString("C")
            <button @onclick="() => CarritoService.Agregar(p, 1)">Agregar</button>
        </div>
    }
}

@code {
    List<ProductoDTO>? productos;
    protected override async Task OnInitializedAsync()
        => productos = await CatalogoService.ListarProductosAsync();
}
